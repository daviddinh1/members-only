<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Messages Page</title>
</head>

<body>
  <% if (membershipStatus && adminStatus) { %>
    <% for (let i=0; i < messages.length; i++) { %>
      <div>
        <p>First Name: <%= messages[i].first_name %>
        </p>
        <p>Last Name: <%= messages[i].last_name %>
        </p>
        <p>Message: <%= messages[i].message || 'No message available' %>
        </p>
        <p>Timestamp: <%= messages[i].timestamp_val || 'No timestamp available' %>
        </p>
      </div>
      <form action="/delete" method="POST">
        <input type="hidden" name="message_id" value="<%= i %>">
        <button type="submit">Delete</button>
      </form>
      <% } %>
        <% } else if (membershipStatus) { %>
          <% for (let i=0; i < messages.length; i++) { %>
            <div>
              <p>First Name: <%= messages[i].first_name %>
              </p>
              <p>Last Name: <%= messages[i].last_name %>
              </p>
              <p>Message: <%= messages[i].message || 'No message available' %>
              </p>
              <p>Timestamp: <%= messages[i].timestamp_val || 'No timestamp available' %>
              </p>
            </div>
            <% } %>
              <% } else { %>
                <% for (let i=0; i < messages.length; i++) { %>
                  <div>
                    <p>First Name: <%= messages[i].first_name %>
                    </p>
                    <p>Last Name: <%= messages[i].last_name %>
                    </p>
                    <p>Timestamp: <%= messages[i].timestamp_val || 'No timestamp available' %>
                    </p>
                  </div>
                  <div>
                    <p>Not logged in</p>
                  </div>
                  <% } %>
                    <% } %>
</body>

</html>